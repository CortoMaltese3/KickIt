@model IEnumerable<TeamProject.Models.Branch>
@using System.Globalization

@{
    ViewBag.Title = "Nearest";
}
@section styles
{
    <style>
        #map {
            width: 1054px;
            height: 469px;
            padding-top: 0px;
            padding-bottom: 0px;
            padding-right: 0px;
            padding-left: 0px;
        }
    </style>
}
<h2>Nearest Pitches</h2>

<div id="map"></div>
@{
    string listOfBranches = string.Empty;
}

@foreach (var branch in Model)
{
    <div class="card mb-3 rounded rounded-lg border border-success d-flex p-2 bd-highlight d-flex">
        <div class="row no-gutters">
            <div class="col-md-4">
                <img src="@branch.ImageCourt" class="card-img" alt="@branch.Name">
            </div>
            <div class="col-md-8">
                <div class="card-body align-content-end flex-column">
                    <h5 class="card-title">@branch.Name</h5>
                    <p class="card-text">@branch.Address</p>
                    <a href="/Courts/index" class="btn btn-success btn-lg active mt-auto" role="button" aria-pressed="true">View details!</a>
                </div>
            </div>
        </div>
    </div>
    listOfBranches += string.Format(CultureInfo.InvariantCulture,
        "['{0}',{1},{2},'{3}','{4}'],", branch.Name, branch.Latitude, branch.Longitude, branch.ImageCourt, branch.Address);

}
@section scripts
{
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrnm2ptgfajjtlCfM97wat7Jsx5KZ0UoA&libraries=places"></script>
    <script>
        var mapzoom = 12;
        var locations = [@Html.Raw(@listOfBranches)];
    </script>
    <script src="~/Scripts/google-maps-nearest.js"></script>
}

